<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin & Win Loyalty</title>
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Favicon Links -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- Optional: Add theme color for browser UI -->
    <meta name="theme-color" content="#1a1a2e"> <!-- Default Dark Theme Background for splash -->
</head>
<body>
    <!-- Main Application Container -->
    <div id="app-container">

        <!-- Header Section -->
        <header id="app-header">
             <button id="back-button" class="header-button hidden" aria-label="Go back">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <h1 id="header-title">Spin & Win</h1>
            <div id="header-auth-section">
                 <a id="header-login-link" href="#/auth" class="button button-secondary button-small hidden">Login / Sign Up</a>
                 <div id="header-user-section" class="header-user-info hidden">
                     <span id="header-user-name" aria-label="Current User">User</span>
                     <a id="dashboard-link" href="#/dashboard" class="header-button" aria-label="View Dashboard">
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                     </a>
                     <button id="header-logout-button" class="button button-secondary button-small logout-button" aria-label="Logout">Logout</button>
                 </div>
            </div>
            <div id="header-placeholder-right" class="header-placeholder hidden"></div>
        </header>

        <!-- Main Content Area for Pages -->
        <main id="main-content">

            <!-- Global Loading Indicator Page -->
            <div id="page-loading" class="page loading-visible"><div class="spinner"></div></div>

            <!-- Landing Page (Enhanced Dark Theme) -->
            <div id="page-landing" class="page landing-page dark-theme">
                 <div class="landing-background-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                 </div>
                 <div class="content-wrapper center-text landing-content">
                    <img id="landing-restaurant-logo" src="/assets/icons/gift-box.png" alt="Welcome" class="landing-logo">
                    <h2 id="landing-restaurant-name" class="landing-title">Restaurant Name</h2>
                    <p id="landing-restaurant-description" class="landing-description">Tap below for exclusive rewards!</p>
                    <button id="landing-spin-button" class="button button-primary button-large button-glow pulse">Get Rewards!</button>
                </div>
            </div>

            <!-- Spin Page (Slot Machine Style) -->
            <div id="page-spin" class="page spin-page"> <!-- Light theme -->
                 <div class="content-wrapper spin-page-content">
                    <h2 id="spin-prompt" class="spin-prompt">SPIN & WIN!</h2>
                    <p class="spin-subtitle">Tap Spin Now to reveal your reward!</p>
                    <div id="spin-message-display" class="message-display hidden"></div>

                    <!-- Rewards Preview -->
                    <section id="spin-rewards-preview" class="rewards-preview-section card-style hidden">
                         <h4>REWARDS PREVIEW</h4>
                         <div id="spin-rewards-preview-container" class="rewards-preview-grid"></div>
                    </section>

                    <!-- Slot Machine Visual (Single Reel) -->
                    <div id="slot-machine-container" class="slot-machine single-reel"> <!-- Added single-reel class -->
                         <div class="slot-machine-window-overlay"></div>
                         <div class="slot-machine-window">
                             <!-- ONLY ONE REEL -->
                             <div class="slot-reel" id="reel1">
                                 <div class="slot-reel-container">
                                     <div class="slot-item">üéÅ</div> <!-- Initial placeholder -->
                                 </div>
                             </div>
                         </div>
                         <div class="slot-machine-decor">
                            <div class="decor-dot dot1"></div> <div class="decor-dot dot2"></div>
                            <div class="decor-dot dot3"></div> <div class="decor-dot dot4"></div>
                         </div>
                    </div>

                     <!-- Spin Action Button -->
                     <div class="spin-action-area">
                          <button id="spin-action-button" class="button button-primary button-large button-glow">
                              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>
                              <span>Spin Now</span>
                          </button>
                     </div>

                     <!-- Spins Left Info -->
                     <div class="spin-info-footer">
                         <span id="spin-remaining-spins" class="spin-info hidden">Spins left: 3</span>
                     </div>
                 </div>
            </div>

            <!-- Authentication Page -->
            <div id="page-auth" class="page">
                 <div class="content-wrapper auth-page-content">
                    <div id="auth-claim-info" class="reward-info hidden">
                        <p>Please login or sign up to claim:</p>
                        <h3 id="auth-claim-description">Reward Description</h3>
                    </div>
                    <div id="auth-tabs" class="auth-tabs-container">
                         <button id="auth-login-tab" class="auth-tab active" data-tab-target="auth-login-form">Login</button>
                         <button id="auth-signup-tab" class="auth-tab" data-tab-target="auth-signup-form">Sign Up</button>
                    </div>
                    <form id="auth-login-form" class="auth-form">
                        <h3>Welcome Back!</h3>
                        <div id="auth-login-message" class="message-display hidden"></div>
                         <div class="form-group"><label for="auth-email-login">Email</label><input type="email" id="auth-email-login" required autocomplete="username"></div>
                         <div class="form-group"><label for="auth-password-login">Password</label><input type="password" id="auth-password-login" required autocomplete="current-password"></div>
                         <button type="submit" id="auth-login-button" class="button button-primary button-fullWidth">Login</button>
                    </form>
                    <form id="auth-signup-form" class="auth-form hidden">
                        <h3>Create Your Account</h3>
                        <div id="auth-signup-message" class="message-display hidden"></div>
                         <div class="form-group"><label for="auth-name-signup">Your Name</label><input type="text" id="auth-name-signup" required autocomplete="name"></div>
                         <div class="form-group"><label for="auth-whatsapp-signup">WhatsApp Number</label><input type="tel" id="auth-whatsapp-signup" required autocomplete="tel" placeholder="e.g., 9876543210"></div>
                         <div class="form-group"><label for="auth-email-signup">Email</label><input type="email" id="auth-email-signup" required autocomplete="email"></div>
                         <div class="form-group"><label for="auth-password-signup">Password (min. 6 characters)</label><input type="password" id="auth-password-signup" required minlength="6" autocomplete="new-password"></div>
                         <button type="submit" id="auth-signup-button" class="button button-primary button-fullWidth">Sign Up & Claim</button>
                    </form>
                </div>
            </div>

            <!-- Coupon Display Page -->
            <div id="page-coupon-display" class="page">
                 <div class="content-wrapper">
                     <h2 class="coupon-title">üéÅ Your Coupon Code üéÅ</h2>
                     <div id="coupon-bonus-message" class="message-display success-message hidden"></div>
                     <div class="coupon-card">
                         <p id="coupon-description">Reward Description</p>
                         <div class="code-container"><span class="code-label">Your Code:</span><p id="coupon-code" class="code">CODE-123</p></div>
                         <p id="coupon-validity" class="validity">Show code to redeem.</p>
                     </div>
                     <div class="page-actions">
                        <button id="coupon-view-rewards-button" class="button button-secondary button-fullWidth">View Dashboard</button>
                        <button id="coupon-spin-again-button" class="button button-primary button-fullWidth">Spin Again!</button>
                     </div>
                 </div>
            </div>

            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page">
                 <div class="content-wrapper dashboard-content">
                     <section id="dashboard-profile" class="profile-section card-style hidden">
                         <h3 id="dashboard-welcome">Welcome!</h3>
                         <div class="profile-details"><p>Email: <span id="dashboard-email"></span></p><p>WhatsApp: <span id="dashboard-phone"></span></p></div>
                         <div class="profile-actions"><button id="dashboard-edit-profile-button" class="button button-secondary button-small">Edit Profile</button></div>
                     </section>
                     <section id="dashboard-summary" class="dashboard-summary-section card-style hidden"></section>
                     <h3 id="dashboard-restaurant-header" class="section-header hidden">Your Restaurant Activity</h3>
                     <div id="dashboard-tabs" class="dashboard-tabs-container hidden"></div>
                     <div id="dashboard-tab-content" class="dashboard-tab-content-container">
                         <p id="dashboard-no-data" class="hidden info-message text-center">Loading dashboard data...</p>
                     </div>
                 </div>
            </div>

             <!-- Not Found Page -->
             <div id="page-not-found" class="page">
                 <div class="content-wrapper center-text">
                     <h1>404</h1><h2>Oops! Page Not Found.</h2>
                     <p>Sorry, the page you are looking for doesn't exist or the restaurant is not available.</p>
                     <a href="#/" class="button button-primary">Go Back Home</a>
                 </div>
             </div>

        </main>

        <!-- Modals Container -->
        <div id="modal-overlay" class="modal-overlay hidden">
            <div id="modal-reward-won" class="modal hidden">
                <h2 class="modal-header">üéâ Congratulations! üéâ</h2>
                <div class="modal-body"><p>You won:</p><p id="modal-reward-description" class="modal-reward-won-text"></p></div>
                <div class="modal-actions">
                    <button id="modal-claim-button" class="button button-primary">Claim Reward</button>
                    <button id="modal-spin-again-button" class="button button-secondary modal-close-button" data-modal-id="modal-reward-won">Spin Again</button>
                </div>
                <button class="modal-close-button" aria-label="Close modal" data-modal-id="modal-reward-won">√ó</button>
            </div>
            <div id="modal-edit-profile" class="modal hidden">
                <h2 class="modal-header">Edit Profile</h2>
                <form id="edit-profile-form">
                     <div id="edit-profile-message" class="message-display error-message hidden"></div>
                     <div class="form-group"><label for="edit-name">Your Name</label><input type="text" id="edit-name" required autocomplete="name"></div>
                     <div class="form-group"><label for="edit-phone">WhatsApp Number</label><input type="tel" id="edit-phone" required autocomplete="tel"></div>
                     <div class="modal-actions">
                         <button type="submit" class="button button-primary">Save Changes</button>
                         <button type="button" class="button button-secondary modal-close-button" data-modal-id="modal-edit-profile">Cancel</button>
                     </div>
                </form>
                 <button class="modal-close-button" aria-label="Close modal" data-modal-id="modal-edit-profile">√ó</button>
            </div>
             <div id="modal-message" class="modal hidden">
                 <h2 id="modal-message-title" class="modal-header">Message</h2>
                 <div class="modal-body"><p id="modal-message-text"></p></div>
                 <div class="modal-actions"><button type="button" class="button button-primary modal-close-button" data-modal-id="modal-message">OK</button></div>
                  <button class="modal-close-button" aria-label="Close modal" data-modal-id="modal-message">√ó</button>
             </div>
        </div><!-- /#modal-overlay -->

    </div><!-- /#app-container -->

    <!-- Firebase SDK Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

    <!-- Your main app script -->
    <script type="module" src="js/app.js" defer></script>
</body>
</html>